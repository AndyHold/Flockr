<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<migration xmlns="http://ebean-orm.github.io/xml/ns/dbmigration">
    <changeSet type="apply">
        <addColumn tableName="destination">
            <column name="destination_district" type="varchar"/>
        </addColumn>
        <createTable name="trip_node_user_role" pkName="pk_trip_node_user_role">
            <column name="trip_node_trip_node_id" type="integer" notnull="true" primaryKey="true"/>
            <column name="user_role_user_role_id" type="integer" notnull="true" primaryKey="true"/>
            <foreignKey name="fk_trip_node_user_role_trip_node" columnNames="trip_node_trip_node_id" refColumnNames="trip_node_id" refTableName="trip_node" indexName="ix_trip_node_user_role_trip_node"/>
            <foreignKey name="fk_trip_node_user_role_user_role" columnNames="user_role_user_role_id" refColumnNames="user_role_id" refTableName="user_role" indexName="ix_trip_node_user_role_user_role"/>
        </createTable>
        <addColumn tableName="user_role">
            <column name="user_user_id" type="integer" references="user.user_id" foreignKeyName="fk_user_role_user_user_id" foreignKeyIndex="ix_user_role_user_user_id"/>
            <column name="role_role_id" type="integer" references="role.role_id" foreignKeyName="fk_user_role_role_role_id" foreignKeyIndex="ix_user_role_role_role_id"/>
        </addColumn>
    </changeSet>
    <changeSet type="pendingDrops">
        <dropColumn columnName="destination_district_district_id" tableName="destination"/>
        <dropColumn columnName="role_id" tableName="user_role"/>
        <dropColumn columnName="user_id" tableName="user_role"/>
        <dropTable name="district" sequenceCol="district_id"/>
    </changeSet>
</migration>